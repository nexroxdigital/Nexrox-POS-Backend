// diagram.io

Table users {
  _id string [pk]
  avatar string
  name string
  email string
  number number
  role varchar [note: 'enum: admin, manager, operator, staff']
  
  Note: 'User management table'
}

Table customers {
  _id string [pk]
  sl string
  name string
  email string
  phone string
  avatar string
  balance number
  dua number
  cost number
  location string
  role string [default: 'customer']
  Crate_Type_1 number
  Crate_Type_2 number
  
  Note: 'Customer information'
}

Table suppliers {
  _id string [pk]
  sl string
  name string
  email string
  phone string
  avatar string
  balance number
  dua number
  cost number
  location string
  role string [default: 'supplier']
  Crate_Type_1 number
  Crate_Type_2 number
  
  Note: 'Supplier information'
}

Table categories {
  _id string [pk]
  categoryName string
  slug string
  description string
  comment string
  
  Note: 'Product categories'
}

Table products {
  _id string [pk]
  productName string
  basePrice number
  productImage string
  description string
  categoryId string
  commissionRate number
  sku string
  allowCommission boolean
  isCrated boolean
  
  Note: 'Product catalog'
}

Table income {
  _id string [pk]
  sell_date string
  saleID string
  totalSell number
  lot_commission number
  customer_commission number
  total_income number
  received_amount number
  due_amount number
  
  Note: 'Income tracking'
}

Table sales {
  _id string [pk]
  sell_date string
  customerId string
  total_customer_commission number
  payable_Amount number
  change_Amount number
  due_Amount number
  payment_Type string
  received_Amount number
  Vat number
  Note string
  
  Note: 'Sales transactions'
}

Table sales_items {
  _id string [pk]
  saleId string
  productId string
  customer_commission_Rate number
  customer_commission_Amount number
  profit number
  
  Note: 'Individual items in sales'
}

Table selected_lots {
  _id string [pk]
  sales_item_id string
  lotId string
  selected_kg number
  discounted_kg number
  selected_unit_price number
  total_price number
  discounted_amount number
  selling_price number
  lot_commission_rate number
  lot_commission_amount number
  crate_type_1 number
  crate_type_2 number
  
  Note: 'Lots selected for sales items'
}

Table purchase {
  _id string [pk]
  purchase_date string
  status varchar [note: 'enum: pending, received, canceled']
  total_customer_commission number
  labour number
  transportation number
  van_vara number
  moshjid number
  trading_post number
  other_expenses number
  
  Note: 'Purchase orders'
}

Table selected_purchase_items {
  _id string [pk]
  purchaseId string
  supplierId string
  productsId string
  lot_name string
  unitCost number
  commission_rate number
  carat_Type_1 number
  carat_Type_2 number
  labour number
  transportation number
  van_vara number
  moshjid number
  trading_post number
  other_expenses number
  
  Note: 'Items in purchase orders'
}

Table lots {
  _id string [pk]
  lot_name string
  purchase_date string
  status varchar [note: 'enum: in stock, stock out']
  hasCommission boolean
  productsId string
  supplierId string
  purchaseListId string
  commissionRate number
  unitCost number
  totalKgSold number
  totalSoldPrice number
  lot_Profit number
  customer_profit number
  total_Profit number
  total_profit_without_comm number
  
  Note: 'Inventory lots'
}

// Relationships
Ref: products.categoryId > categories._id
Ref: income.saleID > sales._id
Ref: sales.customerId > customers._id
Ref: sales_items.saleId > sales._id
Ref: sales_items.productId > products._id
Ref: selected_lots.sales_item_id > sales_items._id
Ref: selected_lots.lotId > lots._id
Ref: selected_purchase_items.purchaseId > purchase._id
Ref: selected_purchase_items.supplierId > suppliers._id
Ref: selected_purchase_items.productsId > products._id
Ref: lots.productsId > products._id
Ref: lots.supplierId > suppliers._id
Ref: lots.purchaseListId > purchase._id




//
//
//------------------ eraser.io

colorMode pastel
notation crows-foot


users [icon: user, color: blue] {
  _id string pk
  avatar string
  name string
  eamil string
  number number
  role enum["admin","manager", "operator","staff"]

}

customers [icon: user, color: blue] {
  _id     string pk
  sl      string
  name    string
  email   string
  phone   string
  avatar  string
  blamce  number
  dua     number
  cost    number
  location string
  role     [customer] string
  Crate_Type_1 number
  Crate_Type_2 number
}

suppliers [icon: user, color: blue] {
  _id     string pk
  sl      string
  name    string
  email   string
  phone   string
  avatar  string
  blamce  number
  dua     number
  cost    number
  location string
  role     [supplier] string
  Crate_Type_1 number
  Crate_Type_2 number
}

products [icon: box, color: orange] {
  _id string pk
  productName string
  basePrice number
  productImage string
  description string
  categoryId > categories._id
  commissionRate number
  sku string
  allowCommission boolean
  isCrated boolean
}

categories [icon: boxes, color: orange] {
  _id string pk
  categoryName string
  slug string
  description string
  comemnt string
}

income [icon: dollar-sign, color: green] {
  _id string pk 
  sell_date string
  saleID > sales._id
  totalSell number
  lot_comssion number
  customer_comssion number
  total_income number 
  recived_amount number
  due_ammount number
}

sales [icon: handshake, color:red] {
  _id string pk 
  sell_date string
  cusomerId > customers._id
  total_customer_commission number

  payable_Amount number
  change_Amount number
  due_Amount number
  payment_Type string
  received_Amount number
  Vat number
  Note string

  items[] >sales_items._id

}

sales_items [icon: handshake, color: red] {
  _id string pk 
  productId string

  lots [] > selected_lots.lotId


  cutomer_commission_Rate number
  cutomer_commission_Amount number
  pfofit number
}

selected_lots [icon: list, color:red]{
  lotId >lots._id

  seleceted_kg number
  discounted_kg number

  selecetd_unit_price number
  total_prcie number
  discounted_amount number
  selling_prcie number

  lot_commission_rate number
  lot_commission_amount number

  crate_type_1 number
  crate_type_2 number
}

purchase [icon: shopping-cart, color:green]{
  _id string pk
  purchase_date string
  status enum["pending" ,"revived","canceled"]
  total_customer_commission number

  items[]  > selected_purchase_items

  labour number
  transportation number
  van_vara number
  moshjid number
  trading_post number
  other_expenses number

}

selected_purchase_items [icon: boxes,color:green]{
  supplierId string > suppliers._id

  productsId > products._id 

  lot_name string
  unitCost number
  commission_rate number
  carat_Type_1 number
  carat_Type_2 number

  labour number
  transportation number
  van_vara number
  moshjid number
  trading_post number
  other_expenses number


}

lots [icon: ship,color:green]{
  _id string
  lot_name string
  purchase_date string

  status [in stock,stock Out]

  hasCommission boolean

  productsId > products._id
  supplierId > suppliers._id
  purchaseListId >purchase._id
  comssionRate number
  unitCost number

  totalKgSold number
  totalSoldPrice number
  
  lot_Profit  number
  cusromer_profit  number
  total_Profit  number
  total_profit_without_comm number
}

// realtion
// products.category > categories._id
  
